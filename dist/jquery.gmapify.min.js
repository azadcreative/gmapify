/*
 *  jquery-gmapify - v
 *  Integrate Google Maps with multiple pointers with data provided in markup.
 *  http://www.saddamazad.com
 *
 *  Made by Saddam Azad
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";a.gmapify=function(c,d){var e={meta:"#map-meta",metalist:"li",zoom:12,scrollwheel:!1},f=this;f.settings={};a(c);f.init=function(){f.settings=a.extend({},e,d);var c=a(this.settings.meta).find(this.settings.metalist),h=[],i=[];a(c).each(function(){var b=a(this).find("a span.name").html(),c=a(this).find('.location span[property="latitude"]').attr("content"),d=a(this).find('.location span[property="longitude"]').attr("content"),e=a(this).find('a span[itemprop="streetAddress"]').html(),f=a(this).find('a span[itemprop="description"]').html();"undefined"==typeof f&&(f=""),i.push(['<div class="info_content"><h3>'+b+"</h3><h4>"+e+"</h4><p>"+f+"</p></div>"]),h.push([b,c,d])}),console.log(h[0][1]);var j=(new google.maps.LatLngBounds,{center:new google.maps.LatLng(h[0][1],h[0][2]),zoom:12,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}),k=new google.maps.Map(a("#map-canvas")[0],j);k.setTilt(45);var l,m,n=new google.maps.InfoWindow;google.maps.event.addListener(k,"click",function(){n.close()});for(var o=0;o<h.length;o++){l=h[o];var p=i[o][0],q=parseFloat(l[1]),r=parseFloat(l[2]),s=new google.maps.Marker({position:new google.maps.LatLng(q,r),map:k,content:p});google.maps.event.addListener(s,"click",function(){n.setContent(p),n.open(k,s)})}a(c).find("a").on("click",function(){m=a(this).parent().index(),g(m,h,i)}),google.maps.event.addListenerOnce(k,"idle",function(){g(0,h,i)});var t=k.getCenter();google.maps.event.addDomListener(b,"resize",function(){k.setCenter(t)});var u=google.maps.event.addListener(k,"bounds_changed",function(){this.setZoom(12),google.maps.event.removeListener(u)})};var g=function(a,b,c){var d=b[a],e=c[a][0],f=d[1],g=d[2],h=new google.maps.LatLng(f,g),i=new google.maps.Marker({map:map,content:e,position:h});google.maps.event.addListener(i,"click",function(){infoWindow.setContent(e),infoWindow.open(map,i)}),google.maps.event.trigger(d,"click")};f.init()},a.fn.gmapify=function(b){return this.each(function(){if(d===a(this).data("gmapify")){var c=new a.gmapify(this,b);a(this).data("gmapify",c)}})}}(jQuery);